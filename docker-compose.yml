version: "3.9"

services:
  web:
    build: .
    command: ["elpc", "serve", "--host", "0.0.0.0", "--port", "8000", "--db", "/data/prices.sqlite3"]
    ports:
      - "8000:8000"
    volumes:
      - elpc-data:/data
    environment:
      - ELPC_COOKIE_XKOM=${ELPC_COOKIE_XKOM:-}
      - ELPC_COOKIE_MORELE=${ELPC_COOKIE_MORELE:-}
      - ELPC_COOKIE_AMAZON=${ELPC_COOKIE_AMAZON:-}
  worker:
    build: .
    command: ["elpc", "run", "--interval", "900", "--db", "/data/prices.sqlite3"]
    volumes:
      - elpc-data:/data
    environment:
      - ELPC_COOKIE_XKOM=${ELPC_COOKIE_XKOM:-}
      - ELPC_COOKIE_MORELE=${ELPC_COOKIE_MORELE:-}
      - ELPC_COOKIE_AMAZON=${ELPC_COOKIE_AMAZON:-}

volumes:
  elpc-data:
